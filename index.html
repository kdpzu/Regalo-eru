<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROTOCOL_ERU.EXE üñ§</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --pixel-font: 'Press Start 2P', cursive;
            --persona-red: #d02020;
            --glow: 0 0 10px #fff, 0 0 20px #fff;
        }

        body {
            margin: 0;
            background-color: black;
            color: white;
            font-family: var(--pixel-font);
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* --- EFECTO CRT/SCANLINES (Estilo Lain) --- */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 100;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.9; } 50% { opacity: 1; } 100% { opacity: 0.9; }
        }

        /* --- UI PERSONA (Formas Oblicuas) --- */
        .persona-header {
            background: var(--persona-red);
            color: black;
            padding: 10px 40px;
            transform: skew(-15deg) rotate(-2deg);
            box-shadow: 10px 10px 0px white;
            margin-bottom: 30px;
            display: inline-block;
        }

        .persona-header h1 { margin: 0; text-shadow: none; transform: skew(15deg); }

        /* --- PANTALLAS --- */
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            z-index: 10;
        }
        .active { display: flex; animation: fadeIn 0.5s forwards; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- BOTONES GLOW --- */
        button {
            background: black;
            border: 3px solid white;
            color: white;
            padding: 15px 30px;
            font-family: inherit;
            font-size: 0.8rem;
            cursor: pointer;
            margin: 10px;
            box-shadow: var(--glow);
            transition: 0.2s;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
        }

        button:hover { background: white; color: black; transform: scale(1.1); }

        /* --- √ÅREA DE JUEGO (Tablero) --- */
        #game-grid {
            display: grid;
            gap: 10px;
            padding: 20px;
            border: 5px solid white;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 0 20px rgba(255,255,255,0.2);
            position: relative;
        }

        .emoji-btn {
            width: 60px; height: 60px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; cursor: pointer;
            background: rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* --- EFECTO GLITCH AL FALLAR --- */
        .glitch-flash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: red; mix-blend-mode: exclusion;
            z-index: 200; display: none;
        }

        /* --- PARTICULAS FLOTANTES --- */
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }

        /* --- FINAL: ESTRELLAS Y NOTAS --- */
        .star {
            position: absolute; top: 50%; left: 50%;
            width: 100px; height: 100px;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            transform: translate(-50%, -50%) scale(0);
        }
        @keyframes starExpand {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(12); opacity: 0; }
        }

        .note { position: absolute; color: white; top: -50px; animation: fall linear infinite; text-shadow: var(--glow); }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* --- CALLING CARD --- */
        .calling-card {
            background: var(--persona-red);
            padding: 30px; border: 5px solid black;
            transform: rotate(-3deg);
            box-shadow: 20px 20px 0 black;
            color: black; font-weight: bold; max-width: 80%;
        }
    </style>
</head>
<body>

    <div class="overlay"></div>
    <div class="glitch-flash" id="flash"></div>
    <div class="particles" id="particles"></div>
    
    <audio id="bg-music" loop>
        <source src="tu_cancion.mp3" type="audio/mpeg">
    </audio>

    <div id="boot-screen" class="screen active">
        <div id="boot-text" style="text-align: left; font-size: 0.7rem; color: #0f0;"></div>
    </div>

    <div id="start-screen" class="screen">
        <div class="persona-header"><h1>PROTOCOL: ERU</h1></div>
        <p style="font-size: 0.5rem;">STATUS: READY FOR UPLOAD</p>
        <button onclick="startSequence()">HACK SYSTEM</button>
    </div>

    <div id="game-screen" class="screen">
        <div style="display: flex; gap: 20px; margin-bottom: 10px;">
            <div id="timer" style="background: white; color: black; padding: 5px;">00s</div>
            <div id="lvl" style="background: var(--persona-red); padding: 5px;">LVL 1/7</div>
        </div>
        <div id="game-grid"></div>
    </div>

    <div id="victory-screen" class="screen">
        <div class="persona-header"><h1>ACCESS GRANTED</h1></div>
        <button onclick="selectPrize('EDIT PERSONALIZADO')">1. EDIT</button>
        <button onclick="selectPrize('VIDEO PERSONALIZADO')">2. VIDEO</button>
        <button onclick="selectPrize('UN BESITO')">3. BESITO</button>
    </div>

    <div id="final-screen" class="screen">
        <div id="stars-container"></div>
        <div class="calling-card">
            <p style="background: black; color: white; display: inline-block; padding: 5px;">TAKE YOUR HEART</p>
            <h2 id="prize-text" style="font-size: 0.8rem; margin: 15px 0;"></h2>
            <p style="font-size: 0.6rem;">Gracias Erubiel por tu tiempo, por tus dibujos que tanto aprecio y por cada vez que me haces sonre√≠r.</p>
            <p style="text-align: right; font-size: 0.5rem; margin-top: 20px;">‚Äî TU HACKER FAVORITO üñ§</p>
        </div>
    </div>

    <script>
        const levels = [
            { d: 'üíó', f: 'üíñ', s: 3 }, { d: 'üôÉ', f: 'üôÇ', s: 4 },
            { d: 'üôÅ', f: '‚òπÔ∏è', s: 4 }, { d: 'üò•', f: 'üò¢', s: 5 },
            { d: 'üò¶', f: 'üòß', s: 5 }, { d: 'ü´§', f: 'üôÅ', s: 6 },
            { d: 'üòù', f: 'üòõ', s: 6 }
        ];

        let curLvl = 0;
        let time = 0;
        let timerInt;

        // --- INTRO HACKER ---
        const bootLines = [
            "> INITIALIZING PROTOCOL_ERU-B...",
            "> LOADING PERSONAL_MEMORIES... [OK]",
            "> BYPASSING EMOTIONAL_FIREWALL...",
            "> SEARCHING FOR ART_DATA... [FOUND]",
            "> SMILE_SYNC: 100%",
            "> SYSTEM READY."
        ];
        
        function typeBoot(idx) {
            if(idx < bootLines.length) {
                document.getElementById('boot-text').innerHTML += bootLines[idx] + "<br>";
                setTimeout(() => typeBoot(idx+1), 400);
            } else {
                setTimeout(() => transition('boot-screen', 'start-screen'), 1000);
            }
        }
        window.onload = () => { 
            typeBoot(0); 
            createParticles();
        };

        function startSequence() {
            document.getElementById('bg-music').play();
            transition('start-screen', 'game-screen');
            timerInt = setInterval(() => { time++; document.getElementById('timer').innerText = time + "s"; }, 1000);
            loadLvl();
        }

        function loadLvl() {
            const grid = document.getElementById('game-grid');
            const data = levels[curLvl];
            document.getElementById('lvl').innerText = `LVL ${curLvl+1}/7`;
            grid.innerHTML = '';
            grid.style.gridTemplateColumns = `repeat(${data.s}, 1fr)`;
            
            const total = data.s * data.s;
            const win = Math.floor(Math.random() * total);
            
            for(let i=0; i<total; i++) {
                const b = document.createElement('div');
                b.className = 'emoji-btn';
                b.innerText = (i === win) ? data.d : data.f;
                b.onclick = (i === win) ? next : triggerGlitch;
                grid.appendChild(b);
            }
        }

        function triggerGlitch() {
            const f = document.getElementById('flash');
            f.style.display = 'block';
            setTimeout(() => f.style.display = 'none', 100);
        }

        function next() {
            curLvl++;
            if(curLvl < levels.length) {
                document.getElementById('game-grid').style.filter = "invert(1)";
                setTimeout(() => { document.getElementById('game-grid').style.filter = "none"; loadLvl(); }, 150);
            } else {
                clearInterval(timerInt);
                transition('game-screen', 'victory-screen');
            }
        }

        function transition(f, t) {
            document.getElementById(f).classList.remove('active');
            setTimeout(() => document.getElementById(t).classList.add('active'), 300);
        }

        function selectPrize(p) {
            document.getElementById('prize-text').innerText = "PREMIO: " + p;
            transition('victory-screen', 'final-screen');
            finalChaos();
        }

        function createParticles() {
            const p = document.getElementById('particles');
            for(let i=0; i<30; i++) {
                const dot = document.createElement('div');
                dot.style.cssText = `position:absolute; width:2px; height:2px; background:white; left:${Math.random()*100}%; top:${Math.random()*100}%; opacity:0.3;`;
                p.appendChild(dot);
            }
        }

        function finalChaos() {
            // Estrellas
            setInterval(() => {
                const s = document.createElement('div');
                s.className = 'star';
                s.style.background = Math.random() > 0.5 ? 'var(--persona-red)' : 'black';
                s.style.animation = 'starExpand 3s forwards linear';
                document.getElementById('stars-container').appendChild(s);
                setTimeout(() => s.remove(), 3000);
            }, 800);

            // Lluvia musical masiva
            const notes = ['‚ô©','‚ô™','‚ô´','‚ô¨','‚ô≠','‚ôÆ','‚ôØ','ùÑû','ùÑ°','ùÑ¢','ùÑ´'];
            setInterval(() => {
                const n = document.createElement('div');
                n.className = 'note';
                n.innerText = notes[Math.floor(Math.random()*notes.length)];
                n.style.left = Math.random() * 100 + 'vw';
                n.style.fontSize = (Math.random()*2 + 1) + 'rem';
                n.style.animationDuration = (Math.random()*2 + 1) + 's';
                document.body.appendChild(n);
                setTimeout(() => n.remove(), 3000);
            }, 50)
        }
    </script>
</body>
</html>
